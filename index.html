<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <title>CTET SCORE+</title>

  <meta name="viewport"
        content="width=device-width, initial-scale=1" />



  <!-- CSS -->
  <link rel="stylesheet"
        href="css/common.css">

  <style>

  /* ======================
     LOGIN UI
  ====================== */

  body{
    margin:0;
    font-family:sans-serif;
    background:#f1f5f9;
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
  }

  .login-box{

    width:92%;
    max-width:380px;

    background:#fff;
    padding:28px 24px;

    border-radius:22px;
    text-align:center;

    box-shadow:0 10px 30px
    rgba(0,0,0,.08);
  }

  .login-box h2{
    margin-bottom:18px;
    color:#2563eb;
  }

  .login-box input{

    width:100%;
    padding:14px;

    border-radius:14px;
    border:1px solid #d1d5db;

    margin-bottom:16px;
    font-size:15px;
  }

  .login-box button{

    width:100%;
    padding:14px;

    border:none;
    border-radius:14px;

    background:linear-gradient(
      135deg,#2563eb,#22c55e
    );

    color:#fff;
    font-weight:600;
    font-size:15px;

    cursor:pointer;
  }

  /* ======================
     INSTALL BUTTON
  ====================== */

  #installBtn{

    position:fixed;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);

    background:#111827;
    color:#fff;

    padding:12px 18px;
    border-radius:30px;

    font-size:14px;
    display:none;
    z-index:999;
  }

  /* ======================
     UPDATE POPUP
  ====================== */

  #updateBox{

    position:fixed;
    bottom:20px;
    right:20px;

    background:#fff;
    padding:14px 16px;

    border-radius:16px;
    box-shadow:0 6px 18px
    rgba(0,0,0,.15);

    display:none;
    z-index:999;
  }

  #updateBox button{

    margin-top:8px;
    padding:6px 10px;
    border:none;
    border-radius:8px;

    background:#2563eb;
    color:#fff;
    cursor:pointer;
  }

  </style>

</head>

<body>

  <!-- LOGIN -->
  <div class="login-box">

    <h2>CTET SCORE+</h2>

    <input id="name"
           placeholder="Student Name">

    <button onclick="login()">
      Start Preparation
    </button>

  </div>

  <!-- INSTALL BUTTON -->
  <div id="installBtn">
    ðŸ“² Install App
  </div>

  <!-- UPDATE POPUP -->
  <div id="updateBox">
    ðŸ”„ New update available<br>
    <button onclick="reloadApp()">
      Update Now
    </button>
  </div>

  <!-- AUTH -->
  <script src="js/auth.js"></script>

  <!-- ======================
       PWA SCRIPT
  ====================== -->
  <!--
  <script>

  /* ======================
     SERVICE WORKER
  ====================== */

  if("serviceWorker" in navigator){

    navigator.serviceWorker
      .register("./sw.js")
      .then(reg=>{

        console.log("âœ… SW Registered");

        /* UPDATE DETECT */
        reg.onupdatefound = () => {

          const newWorker =
            reg.installing;

          newWorker.onstatechange = () => {

            if(
              newWorker.state === "installed" &&
              navigator.serviceWorker.controller
            ){
              document
                .getElementById("updateBox")
                .style.display="block";
            }

          };

        };

      });

  }

  /* ======================
     INSTALL PROMPT
  ====================== */

  let deferredPrompt;

  const installBtn =
    document.getElementById("installBtn");

  window.addEventListener(
    "beforeinstallprompt",
    e => {

      e.preventDefault();

      deferredPrompt = e;

      installBtn.style.display =
        "block";

    }
  );

  installBtn.onclick = async () => {

    installBtn.style.display="none";

    deferredPrompt.prompt();

    const { outcome } =
      await deferredPrompt.userChoice;

    console.log("Install:", outcome);

    deferredPrompt = null;

  };

  /* ======================
     UPDATE RELOAD
  ====================== */

  function reloadApp(){
    window.location.reload();
  }

  </script>
-->
</body>
</html>